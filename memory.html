<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Memory | The AssemblyScript Book</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#007acc">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <meta name="description" content="How to import and export memory, and all the details on its layout.">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-config" content="/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="preload" href="/assets/css/0.styles.48fc31d5.css" as="style"><link rel="preload" href="/assets/js/app.8019f0d4.js" as="script"><link rel="preload" href="/assets/js/4.c2b93083.js" as="script"><link rel="preload" href="/assets/js/3.c2c90201.js" as="script"><link rel="preload" href="/assets/js/39.b566fb81.js" as="script"><link rel="prefetch" href="/assets/js/10.7c942788.js"><link rel="prefetch" href="/assets/js/11.e7ae13d4.js"><link rel="prefetch" href="/assets/js/12.6a0c13c5.js"><link rel="prefetch" href="/assets/js/13.a1192fa8.js"><link rel="prefetch" href="/assets/js/14.f285c540.js"><link rel="prefetch" href="/assets/js/15.ae8be02e.js"><link rel="prefetch" href="/assets/js/16.d57870d7.js"><link rel="prefetch" href="/assets/js/17.c8d8153d.js"><link rel="prefetch" href="/assets/js/18.a995ba52.js"><link rel="prefetch" href="/assets/js/19.acd0688f.js"><link rel="prefetch" href="/assets/js/20.c9615394.js"><link rel="prefetch" href="/assets/js/21.4074c907.js"><link rel="prefetch" href="/assets/js/22.aab80bdf.js"><link rel="prefetch" href="/assets/js/23.bd6bd5c5.js"><link rel="prefetch" href="/assets/js/24.11fc2ccd.js"><link rel="prefetch" href="/assets/js/25.d320d5e1.js"><link rel="prefetch" href="/assets/js/26.cb445c47.js"><link rel="prefetch" href="/assets/js/27.860848d1.js"><link rel="prefetch" href="/assets/js/28.fd56c8fc.js"><link rel="prefetch" href="/assets/js/29.cf33bf82.js"><link rel="prefetch" href="/assets/js/30.1c5b176f.js"><link rel="prefetch" href="/assets/js/31.9f6eae54.js"><link rel="prefetch" href="/assets/js/32.1309664e.js"><link rel="prefetch" href="/assets/js/33.f8c6778d.js"><link rel="prefetch" href="/assets/js/34.a150bc40.js"><link rel="prefetch" href="/assets/js/35.961a8d4d.js"><link rel="prefetch" href="/assets/js/36.631f2e16.js"><link rel="prefetch" href="/assets/js/37.0320c53a.js"><link rel="prefetch" href="/assets/js/38.772c6b7d.js"><link rel="prefetch" href="/assets/js/40.8bc5bca5.js"><link rel="prefetch" href="/assets/js/41.75b7be65.js"><link rel="prefetch" href="/assets/js/42.5a423a62.js"><link rel="prefetch" href="/assets/js/43.d37a39e3.js"><link rel="prefetch" href="/assets/js/44.7606f9a7.js"><link rel="prefetch" href="/assets/js/45.ffd2e4a8.js"><link rel="prefetch" href="/assets/js/46.47f5cf09.js"><link rel="prefetch" href="/assets/js/47.3c8d2072.js"><link rel="prefetch" href="/assets/js/48.a87211e5.js"><link rel="prefetch" href="/assets/js/49.caff6482.js"><link rel="prefetch" href="/assets/js/5.e1a3836f.js"><link rel="prefetch" href="/assets/js/50.c18a47fd.js"><link rel="prefetch" href="/assets/js/51.0232d6bf.js"><link rel="prefetch" href="/assets/js/52.eddc2357.js"><link rel="prefetch" href="/assets/js/53.d4ceea01.js"><link rel="prefetch" href="/assets/js/54.15b1f606.js"><link rel="prefetch" href="/assets/js/55.7077eca0.js"><link rel="prefetch" href="/assets/js/56.dbe5ac5a.js"><link rel="prefetch" href="/assets/js/57.c97eca91.js"><link rel="prefetch" href="/assets/js/58.3ed2b79e.js"><link rel="prefetch" href="/assets/js/59.10e20273.js"><link rel="prefetch" href="/assets/js/6.9b31ad7d.js"><link rel="prefetch" href="/assets/js/60.a0bcc78a.js"><link rel="prefetch" href="/assets/js/61.49164f25.js"><link rel="prefetch" href="/assets/js/62.cf56393e.js"><link rel="prefetch" href="/assets/js/63.b4413434.js"><link rel="prefetch" href="/assets/js/64.f8ae45b0.js"><link rel="prefetch" href="/assets/js/65.ff59636c.js"><link rel="prefetch" href="/assets/js/7.b45737b3.js"><link rel="prefetch" href="/assets/js/8.200b0f2c.js"><link rel="prefetch" href="/assets/js/9.f98f89ed.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.7912142d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.48fc31d5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-8ef39a8a><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/icon.svg" alt="The AssemblyScript Book" class="logo"> <span class="site-name can-hide">The AssemblyScript Book</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/introduction.html" class="nav-link">
  Documentation
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Standard library" class="dropdown-title"><span class="title">Standard library</span> <span class="arrow down"></span></button> <button type="button" aria-label="Standard library" class="mobile-dropdown-title"><span class="title">Standard library</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/stdlib/globals.html" class="nav-link">
  Globals
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/array.html" class="nav-link">
  Array
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/arraybuffer.html" class="nav-link">
  ArrayBuffer
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/dataview.html" class="nav-link">
  DataView
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/date.html" class="nav-link">
  Date
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/error.html" class="nav-link">
  Error
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/map.html" class="nav-link">
  Map
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/math.html" class="nav-link">
  Math
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/number.html" class="nav-link">
  Number
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/set.html" class="nav-link">
  Set
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/string.html" class="nav-link">
  String
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/symbol.html" class="nav-link">
  Symbol
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/typedarray.html" class="nav-link">
  TypedArray
</a></li><li class="dropdown-item"><h4>
          Extended
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/stdlib/builtins.html" class="nav-link">
  Builtins
</a></li><li class="dropdown-subitem"><a href="/stdlib/staticarray.html" class="nav-link">
  StaticArray
</a></li><li class="dropdown-subitem"><a href="/stdlib/heap.html" class="nav-link">
  heap
</a></li><li class="dropdown-subitem"><a href="/stdlib/process.html" class="nav-link">
  process
</a></li><li class="dropdown-subitem"><a href="/stdlib/console.html" class="nav-link">
  console
</a></li><li class="dropdown-subitem"><a href="/stdlib/crypto.html" class="nav-link">
  crypto
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Examples" class="dropdown-title"><span class="title">Examples</span> <span class="arrow down"></span></button> <button type="button" aria-label="Examples" class="mobile-dropdown-title"><span class="title">Examples</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/examples.html" class="nav-link">
  Overview
</a></li><li class="dropdown-item"><!----> <a href="/built-with-assemblyscript.html" class="nav-link">
  Built with AssemblyScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow down"></span></button> <button type="button" aria-label="Community" class="mobile-dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/assemblyscript/blob/main/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contributing guidelines
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/assemblyscript/blob/main/CODE_OF_CONDUCT.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Code of Conduct
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>
          Social
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://twitter.com/AssemblyScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://discord.gg/assemblyscript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          Q&amp;A
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://stackoverflow.com/questions/tagged/assemblyscript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Stack Overflow
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://opencollective.com/assemblyscript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support us
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/AssemblyScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/introduction.html" class="nav-link">
  Documentation
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Standard library" class="dropdown-title"><span class="title">Standard library</span> <span class="arrow down"></span></button> <button type="button" aria-label="Standard library" class="mobile-dropdown-title"><span class="title">Standard library</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/stdlib/globals.html" class="nav-link">
  Globals
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/array.html" class="nav-link">
  Array
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/arraybuffer.html" class="nav-link">
  ArrayBuffer
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/dataview.html" class="nav-link">
  DataView
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/date.html" class="nav-link">
  Date
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/error.html" class="nav-link">
  Error
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/map.html" class="nav-link">
  Map
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/math.html" class="nav-link">
  Math
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/number.html" class="nav-link">
  Number
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/set.html" class="nav-link">
  Set
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/string.html" class="nav-link">
  String
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/symbol.html" class="nav-link">
  Symbol
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/typedarray.html" class="nav-link">
  TypedArray
</a></li><li class="dropdown-item"><h4>
          Extended
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/stdlib/builtins.html" class="nav-link">
  Builtins
</a></li><li class="dropdown-subitem"><a href="/stdlib/staticarray.html" class="nav-link">
  StaticArray
</a></li><li class="dropdown-subitem"><a href="/stdlib/heap.html" class="nav-link">
  heap
</a></li><li class="dropdown-subitem"><a href="/stdlib/process.html" class="nav-link">
  process
</a></li><li class="dropdown-subitem"><a href="/stdlib/console.html" class="nav-link">
  console
</a></li><li class="dropdown-subitem"><a href="/stdlib/crypto.html" class="nav-link">
  crypto
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Examples" class="dropdown-title"><span class="title">Examples</span> <span class="arrow down"></span></button> <button type="button" aria-label="Examples" class="mobile-dropdown-title"><span class="title">Examples</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/examples.html" class="nav-link">
  Overview
</a></li><li class="dropdown-item"><!----> <a href="/built-with-assemblyscript.html" class="nav-link">
  Built with AssemblyScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow down"></span></button> <button type="button" aria-label="Community" class="mobile-dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/assemblyscript/blob/main/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contributing guidelines
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/assemblyscript/blob/main/CODE_OF_CONDUCT.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Code of Conduct
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>
          Social
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://twitter.com/AssemblyScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://discord.gg/assemblyscript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          Q&amp;A
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://stackoverflow.com/questions/tagged/assemblyscript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Stack Overflow
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://opencollective.com/assemblyscript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support us
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/AssemblyScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/quick-start.html" class="sidebar-link">Quick Start</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Documentation</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/basics.html" class="sidebar-link">Basic concepts</a></li><li><a href="/status.html" class="sidebar-link">Implementation status</a></li><li><a href="/compiler.html" class="sidebar-link">Using the compiler</a></li><li><a href="/types.html" class="sidebar-link">WebAssembly types</a></li><li><a href="/exports-and-imports.html" class="sidebar-link">Exports and imports</a></li><li><a href="/loader.html" class="sidebar-link">Using the loader</a></li><li><a href="/frequently-asked-questions.html" class="sidebar-link">Frequently asked questions</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Advanced</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/memory.html" aria-current="page" class="active sidebar-link">Memory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/memory.html#importing-memory" class="sidebar-link">Importing memory</a></li><li class="sidebar-sub-header"><a href="/memory.html#exporting-memory" class="sidebar-link">Exporting memory</a></li><li class="sidebar-sub-header"><a href="/memory.html#accessing-memory-during-instantiation" class="sidebar-link">Accessing memory during instantiation</a></li><li class="sidebar-sub-header"><a href="/memory.html#memory-regions" class="sidebar-link">Memory regions</a></li><li class="sidebar-sub-header"><a href="/memory.html#internals" class="sidebar-link">Internals</a></li></ul></li><li><a href="/garbage-collection.html" class="sidebar-link">Garbage Collection</a></li><li><a href="/peculiarities.html" class="sidebar-link">Peculiarities</a></li><li><a href="/portability.html" class="sidebar-link">Portability</a></li><li><a href="/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/interoperability.html" class="sidebar-link">Interoperability</a></li><li><a href="/transforms.html" class="sidebar-link">Transforms</a></li><li><a href="/development.html" class="sidebar-link">Development</a></li></ul></section></li></ul> </aside> <main class="page" data-v-bb3fd134> <div class="theme-default-content content__default" data-v-bb3fd134><h1 id="memory"><a href="#memory" class="header-anchor">#</a> Memory</h1> <p>Similar to other languages that use linear memory, and until the <a href="https://github.com/WebAssembly/gc" target="_blank" rel="noopener noreferrer">GC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 🦄 proposal becomes available, all data in AssemblyScript is stored at a specific offset in linear memory so other parts of the program can read and modify it.</p> <h2 id="importing-memory"><a href="#importing-memory" class="header-anchor">#</a> Importing memory</h2> <p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/Memory" target="_blank" rel="noopener noreferrer">WebAssembly.Memory<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> instance used by your program can be imported from the host by using the <code>--importMemory</code> command line option. The module will then expect an import named <code>memory</code> within the <code>env</code> module to be provided upon instantiation.</p> <p>An imported memory becomes the singleton memory of the module and can be accessed in the same way as a non-imported memory. Note that if the module defines <code>data</code> segments, it will place the data into the imported memory upon instantiation of the module, which must be taken into account when pre-populating the memory externally (e.g. when utilizing <code>--memoryBase</code> to reserve some space as described in <a href="/memory.html#memory-regions">Memory Regions</a> below).</p> <h2 id="exporting-memory"><a href="#exporting-memory" class="header-anchor">#</a> Exporting memory</h2> <p>A module exports its memory as <code>memory</code> by default, unless disabled with <code>--noExportMemory</code>.</p> <h2 id="accessing-memory-during-instantiation"><a href="#accessing-memory-during-instantiation" class="header-anchor">#</a> Accessing memory during instantiation</h2> <p>AssemblyScript runs any top-level statements as part of the emitted WebAssembly module's implicit <code>start</code> function by default. Since the implicit start function executes immediately upon instantiation, this leads to a special case because control flow has not yet yielded back to the host, so the module's exported memory only becomes available externally <em>after</em> the implicit start function completes. The implicit start function may however already trigger external code that requires to read from memory, like when printing a string to console.</p> <p>There are two solutions to this:</p> <ol><li><p><strong>Exporting an explicit start function</strong></p> <p>The <code>--explicitStart</code> command line argument can be used to force exporting the start function as <code>_start</code> instead of making it the module's implicit start function. When doing so it is important to call <code>exports._start()</code> once before calling any other exports to properly initialize the module first.</p></li> <li><p><strong>Preparing memory pre-instantiation and importing it</strong></p> <p>An alternative is to create the <code>WebAssembly.Memory</code> object before instantiating the module, and using <code>--importMemory</code> to import it. This way around the memory is already known when the implicit start function executes.</p></li></ol> <h2 id="memory-regions"><a href="#memory-regions" class="header-anchor">#</a> Memory regions</h2> <p>Internally, there are two regions of memory the compiler is aware of:</p> <h3 id="static-memory"><a href="#static-memory" class="header-anchor">#</a> Static memory</h3> <p>Memory starts with static data, like strings and arrays (of constant values) the compiler encountered while translating the program. Unlike in other languages, there is no concept of a stack in AssemblyScript and it instead relies on WebAssembly's execution stack exclusively.</p> <p>A custom region of memory can be reserved using the <code>--memoryBase</code> option. For example, if one needs an image buffer of exactly N bytes, instead of allocating it one could reserve that space, telling the compiler to place its own static data afterwards, partitioning memory in this order:</p> <table><thead><tr><th style="text-align:left;">Region</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">Reserved memory</td> <td style="text-align:left;">As specified with <code>--memoryBase</code></td></tr> <tr><td style="text-align:left;">Static memory</td> <td style="text-align:left;">Starting right after reserved memory, ends at <code>__heap_base</code></td></tr> <tr><td style="text-align:left;">Dynamic memory</td> <td style="text-align:left;">Starting right after static memory, starts at <code>__heap_base</code></td></tr></tbody></table> <h3 id="dynamic-memory"><a href="#dynamic-memory" class="header-anchor">#</a> Dynamic memory</h3> <p>Dynamic memory, commonly known as the heap, is managed by the <a href="/garbage-collection.html">garbage collector</a>, at runtime. When space for a new object is requested by the program, the runtime's memory manager reserves a suitable region and returns a pointer to it to the program. Once an object is not needed anymore and becomes unreachable, the garbage collector returns the object's memory to the memory manager for reuse.</p> <p>The memory manager guarantees an alignment of 16 bytes, so an <code>ArrayBuffer</code>, which can be the backing buffer of multiple views, always fits up to <code>v128</code> values with natural  alignment.</p> <h2 id="internals"><a href="#internals" class="header-anchor">#</a> Internals</h2> <p><a href="https://webassembly.github.io/spec/core/syntax/instructions.html#memory-instructions" target="_blank" rel="noopener noreferrer">WebAssembly is specified to use little-endian<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and as a result, so is AssemblyScript.</p> <p>Objects in AssemblyScript have a common hidden header used by the runtime to keep track of them. The header includes information about the block used by the memory manager, state information used by the garbage collector, a unique id per concrete class and the data's actual size. The length of a <code>String</code> (id = 1) is computed from that size for example. The header is &quot;hidden&quot; in that the reference to an object points right after it, at the first byte of the object's actual data.</p> <h4 id="common-header-layout"><a href="#common-header-layout" class="header-anchor">#</a> Common header layout</h4> <table><thead><tr><th style="text-align:left;">Name</th> <th style="text-align:right;">Offset</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">#mmInfo</td> <td style="text-align:right;">-20</td> <td style="text-align:left;">usize</td> <td style="text-align:left;">Memory manager info</td></tr> <tr><td style="text-align:left;">#gcInfo</td> <td style="text-align:right;">-16</td> <td style="text-align:left;">usize</td> <td style="text-align:left;">Garbage collector info</td></tr> <tr><td style="text-align:left;">#gcInfo2</td> <td style="text-align:right;">-12</td> <td style="text-align:left;">usize</td> <td style="text-align:left;">Garbage collector info</td></tr> <tr><td style="text-align:left;">#rtId</td> <td style="text-align:right;">-8</td> <td style="text-align:left;">u32</td> <td style="text-align:left;">Unique id of the concrete class</td></tr> <tr><td style="text-align:left;">#rtSize</td> <td style="text-align:right;">-4</td> <td style="text-align:left;">u32</td> <td style="text-align:left;">Size of the data following the header</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:right;">0</td> <td style="text-align:left;"></td> <td style="text-align:left;">Payload starts here</td></tr></tbody></table> <p>In Wasm32, the header is aligned to 16 bytes right after <code>mmInfo</code> and <code>rtSize</code>, with 16 bytes of managed information in between. The object's payload starts at 16 bytes alignment again.</p> <p>The most basic objects using the common header are <code>ArrayBuffer</code> and <code>String</code>. These do not have any fields but are just data:</p> <h4 id="arraybuffer-layout"><a href="#arraybuffer-layout" class="header-anchor">#</a> ArrayBuffer layout</h4> <table><thead><tr><th style="text-align:left;">Name</th> <th style="text-align:right;">Offset</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"></td> <td style="text-align:right;">-20</td> <td style="text-align:left;">See above</td> <td style="text-align:left;">Common header</td></tr> <tr><td style="text-align:left;">[0]</td> <td style="text-align:right;">0</td> <td style="text-align:left;">8-bit untyped</td> <td style="text-align:left;">The first byte</td></tr> <tr><td style="text-align:left;">[1]</td> <td style="text-align:right;">1</td> <td style="text-align:left;">8-bit untyped</td> <td style="text-align:left;">The second byte</td></tr> <tr><td style="text-align:left;">...</td> <td style="text-align:right;"></td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">[N]</td> <td style="text-align:right;">N</td> <td style="text-align:left;">8-bit untyped</td> <td style="text-align:left;">The N-th byte</td></tr></tbody></table> <h4 id="string-layout"><a href="#string-layout" class="header-anchor">#</a> String layout</h4> <table><thead><tr><th style="text-align:left;">Name</th> <th style="text-align:right;">Offset</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"></td> <td style="text-align:right;">-20</td> <td style="text-align:left;">See above</td> <td style="text-align:left;">Common header</td></tr> <tr><td style="text-align:left;">[0]</td> <td style="text-align:right;">0</td> <td style="text-align:left;">u16</td> <td style="text-align:left;">The first character</td></tr> <tr><td style="text-align:left;">[1]</td> <td style="text-align:right;">2</td> <td style="text-align:left;">u16</td> <td style="text-align:left;">The second character</td></tr> <tr><td style="text-align:left;">...</td> <td style="text-align:right;"></td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">[N]</td> <td style="text-align:right;">N &lt;&lt; 1</td> <td style="text-align:left;">u16</td> <td style="text-align:left;">The N-th character</td></tr></tbody></table> <h3 id="functions"><a href="#functions" class="header-anchor">#</a> Functions</h3> <p>Functions being passed by reference are represented by a first-class <code>Function&lt;T&gt;</code>, consisting of the index of the function in the WebAssembly table and an optional pointer to the function's environment if it is a closure. If the function is not a closure, the environment pointer is zero.</p> <table><thead><tr><th style="text-align:left;">Name</th> <th style="text-align:right;">Offset</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"></td> <td style="text-align:right;">-20</td> <td style="text-align:left;">See above</td> <td style="text-align:left;">Common header</td></tr> <tr><td style="text-align:left;">.index</td> <td style="text-align:right;">0</td> <td style="text-align:left;">u32</td> <td style="text-align:left;">Function index</td></tr> <tr><td style="text-align:left;">#env</td> <td style="text-align:right;">4</td> <td style="text-align:left;">usize</td> <td style="text-align:left;">Function environment pointer</td></tr></tbody></table> <h3 id="collections"><a href="#collections" class="header-anchor">#</a> Collections</h3> <p>Collections like <code>Array</code>, <code>Map</code> and <code>Set</code> use one or multiple <code>ArrayBuffer</code>s to store their data, but their backing buffers are only exposed for typed arrays, as it is the case in JavaScript. This is because collections can grow automatically, which would otherwise lead to no longer valid references to buffers sticking around.</p> <h4 id="arraybufferview-layout"><a href="#arraybufferview-layout" class="header-anchor">#</a> ArrayBufferView layout</h4> <p>This is not an actual class but a helper to simplify the implementation of the typed array views. Each typed array view like <code>Uint8Array</code> is like a subclass of <code>ArrayBufferView</code> with a static value type attached.</p> <table><thead><tr><th style="text-align:left;">Name</th> <th style="text-align:right;">Offset</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"></td> <td style="text-align:right;">-20</td> <td style="text-align:left;">See above</td> <td style="text-align:left;">Common header</td></tr> <tr><td style="text-align:left;">#data</td> <td style="text-align:right;">0</td> <td style="text-align:left;">ArrayBuffer</td> <td style="text-align:left;">Backing buffer reference</td></tr> <tr><td style="text-align:left;">#dataStart</td> <td style="text-align:right;">4</td> <td style="text-align:left;">usize</td> <td style="text-align:left;">Start of the data within .data</td></tr> <tr><td style="text-align:left;">#dataLength</td> <td style="text-align:right;">8</td> <td style="text-align:left;">u32</td> <td style="text-align:left;">Length of the data from .dataStart</td></tr></tbody></table> <h4 id="array-layout"><a href="#array-layout" class="header-anchor">#</a> Array layout</h4> <table><thead><tr><th style="text-align:left;">Name</th> <th style="text-align:right;">Offset</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"></td> <td style="text-align:right;">-20</td> <td style="text-align:left;">See above</td> <td style="text-align:left;">Common header</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:right;">0</td> <td style="text-align:left;">See above</td> <td style="text-align:left;">ArrayBufferView</td></tr> <tr><td style="text-align:left;">.length</td> <td style="text-align:right;">12</td> <td style="text-align:left;">i32</td> <td style="text-align:left;">Mutable length of the data the user is interested in</td></tr></tbody></table> <p>The layouts of <code>Set</code> and <code>Map</code> are a bit more sophisticated and therefore not mentioned here, but feel free to take a look at their sources.</p></div> <footer class="page-edit" data-v-bb3fd134><div class="edit-link"><a href="https://github.com/AssemblyScript/website/edit/main/src/memory.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav" data-v-bb3fd134><p class="inner"><span class="prev">
      ←
      <a href="/frequently-asked-questions.html" class="prev">
        Frequently asked questions
      </a></span> <span class="next"><a href="/garbage-collection.html">
        Garbage Collection
      </a>
      →
    </span></p></div> <div class="footer" data-v-bb3fd134 data-v-8ef39a8a><p data-v-bb3fd134 data-v-8ef39a8a><span class="item" data-v-bb3fd134 data-v-8ef39a8a>Apache-2.0 licensed</span>,
      <span class="item" data-v-bb3fd134 data-v-8ef39a8a>Copyright © 2022</span> <span class="item" data-v-bb3fd134 data-v-8ef39a8a>The AssemblyScript Project</span></p></div></main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8019f0d4.js" defer></script><script src="/assets/js/4.c2b93083.js" defer></script><script src="/assets/js/3.c2c90201.js" defer></script><script src="/assets/js/39.b566fb81.js" defer></script>
  </body>
</html>
